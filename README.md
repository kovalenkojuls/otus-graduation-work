# CookHub

## Архитектура

CookHub состоит из трех основных микросервисов:

### 1. *CookHub Web Application:*
  - *Описание:* Основное веб-приложение, предоставляющее пользователям интерфейс для взаимодействия с платформой.
  - *Функциональность:*
    - *Авторизация:*
      - Реализован процесс аутентификации пользователей через стандартные механизмы Spring Security.
    - *Регистрация:*
      - Пользователь может создать новый аккаунт.
      - При успешной регистрации отправляется письмо для подтверждения на указанный email.
      - Каждое письмо сериализуется в DTO и отправляется в очередь Kafka.
    - *Сессии:*
      - Все сессии пользователей сохраняются в базе данных с использованием Spring Session.
    - *Защита от спама:*
      - Реализована механика reCAPTCHA для предотвращения автоматизированной регистрации.
    - *Валидация форм:*
      - Все поля формы регистрации валидируются на стороне сервера с использованием Hibernate Validator, включая отображение ошибок с помощью сообщений на UI.
    - *Управление Рецептами:*
      - *Создание рецептов:*
        - Пользователи могут добавлять новые рецепты, выбирая категории из предустановленного списка и загружая изображения.
      - *Валидация:*
        - Поля в сущности "Рецепт" валидируются на стороне сервера с использованием Hibernate Validator, включая отображение ошибок с помощью сообщений на UI.
      - *Отображение:*
        - Загруженные рецепты отображаются в браузере в виде списка, где представлены подробные сведения о каждом рецепте и информация об авторе (пользователе).
        - Все html формы фильтрации и создания генерируются автоматически на основании категорий, которые описаны в Enum.
      - *Фильтрация:*
        - Реализована возможность фильтрации рецептов по категориям.
    - *Административная Панель:*
      - *Доступ:*
        - Панель управления доступна только для пользователей с ролью "АДМИН".
      - *Управление пользователями:*
        - В админке отображается список всех зарегистрированных пользователей с возможностью редактирования их данных.
    - *Подписки:*
        - Пользователи могут подписываться на понравившихся авторов.
        - Реализован функционал просмотра списка подписок и подписчиков.
        - Пользователи могут просматривать рецепты авторов, на которых они подписаны.
  - *Технологии:* Java, Spring Boot, Spring Security, Spring Session, Hibernate, Thymeleaf, Bootstrap, JavaScript, PostgreSQL, Kafka.
  - *Тестирование:*
    - Написаны интеграционные и юнит-тесты для обеспечения качества кода и функциональности приложения.

### 2. CookHub Email Service:
  - *Описание:*
    - Микросервис, отвечающий за отправку email-уведомлений.
  - *Функциональность:*
    - Получение данных о письмах из очереди Kafka.
    - Генерация HTML-писем на основе шаблонов.
    - Отправка писем пользователям.
  - *Технологии:*
    - Java, Spring Boot, Kafka.

### 3. CookHub Telegram Bot:
  - *Описание:*
    - Телеграм-бот для удобного доступа к функциональности платформы.
  - *Функциональность:*
    - Интеграция с Telegram API.
    - Обработка запросов пользователей.
    - Предоставление случайных рецептов по категориям.
  - *Технологии:* Java, Spring Boot.

## Деплой приложения:
Для развертывания приложения используется Docker:

1. Скачайте скрипт ```start.sh``` на ваш сервер.
2. Настройте переменные окружения в начале скрипта.
3. Предоставьте права на выполнение: ```chmod +x start.sh```.
4. Запустите скрипт: ```./start.sh```.

```
http://COOKHUB_DOMAIN:8080 - основное приложение
http://COOKHUB_DOMAIN:8081 - PgAdmin
http://COOKHUB_DOMAIN:8082 - Kafka UI
```

## Docker:
- Для работы приложения разработана конфигурация, включающая шесть контейнеров:
  - PostgreSQL: СУБД для хранения данных приложения.
  - pgAdmin: Веб-интерфейс для управления базой данных PostgreSQL.
  - Zookeeper: Система координации, используемая для управления Kafka.
  - Kafka: Платформа для обработки потоковых данных.
  - Kafka UI: Визуальное решение для мониторинга и управления Kafka-топиками и сообщениями.
  - Контейнер генерации топиков: Специальный контейнер, который подключается к Kafka и автоматически создает необходимые топики с заданными настройками.

## Screenshots:

1. Форма логина:
    ![Форма логина](https://github.com/kovalenkojuls/otus-graduation-work/blob/dev/cookhub-screenshots/login.png)
2. Форма регистрации нового пользователя:
    ![Форма регистрации](https://github.com/kovalenkojuls/otus-graduation-work/blob/dev/cookhub-screenshots/register.png)
3. Главная страница:
    ![Главная страница](https://github.com/kovalenkojuls/otus-graduation-work/blob/dev/cookhub-screenshots/main.png)
4. Админка:
    ![Админка](https://github.com/kovalenkojuls/otus-graduation-work/blob/dev/cookhub-screenshots/admin.png)
5. Подписчики:
   ![Подписчики](https://github.com/kovalenkojuls/otus-graduation-work/blob/dev/cookhub-screenshots/follower.png)
